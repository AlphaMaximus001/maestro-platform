// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// 1. NEW: User Model (Fixes "Property 'user' does not exist")
model User {
  id        String    @id @default(uuid())
  email     String    @unique
  name      String?
  role      String    @default("STUDENT")
  createdAt DateTime  @default(now())
  
  // NEW: A user can have many bookings
  bookings  Booking[] 
}

model Teacher {
  id          String   @id @default(uuid())
  name        String
  subject     String
  bio         String
  image       String?
  rating      Float    @default(5.0)
  
  // 2. FIXED: Re-added location (Fixes "location does not exist")
  location    String?  
  
  // Pricing
  hourlyRate  Int
  dailyRate   Int?     @default(0) 
  monthlyRate Int?     @default(0) 
  
  bookings    Booking[]
  reviews     Review[]
}

model Booking {
  id          String   @id @default(uuid())
  date        DateTime
  
  // Teacher Relation
  teacherId   String
  teacher     Teacher  @relation(fields: [teacherId], references: [id])
  
  // Student Relation (FIXED)
  studentId   String
  student     User     @relation(fields: [studentId], references: [id]) // <--- This link was missing!
  
  durationHrs Int      @default(2)
  totalPrice  Int
  address     String?
  status      String   @default("PENDING")
  createdAt   DateTime @default(now())
}

model Review {
  id        String   @id @default(uuid())
  rating    Int
  comment   String
  teacherId String
  teacher   Teacher  @relation(fields: [teacherId], references: [id])
}